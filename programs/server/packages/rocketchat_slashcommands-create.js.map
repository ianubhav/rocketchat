{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat:slashcommands-create/server.js"],"names":["Create","command","params","item","channel","room","user","Match","test","String","trim","Meteor","users","findOne","userId","RocketChat","models","Rooms","findOneByName","Notifications","notifyUser","_id","Random","id","rid","ts","Date","msg","TAPi18n","__","postProcess","sprintf","language","call","slashCommands","add"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,MAAT,CAAgBC,OAAhB,EAAyBC,MAAzB,EAAiCC,IAAjC,EAAuC;AACtC,KAAIC,OAAJ,EAAaC,IAAb,EAAmBC,IAAnB;AACA,KAAIL,YAAY,QAAZ,IAAwB,CAACM,MAAMC,IAAN,CAAWN,MAAX,EAAmBO,MAAnB,CAA7B,EAAyD;AACxD;AACA;AACDL,WAAUF,OAAOQ,IAAP,EAAV;AACA,KAAIN,YAAY,EAAhB,EAAoB;AACnB;AACA;;AAEDE,QAAOK,OAAOC,KAAP,CAAaC,OAAb,CAAqBF,OAAOG,MAAP,EAArB,CAAP;AACAT,QAAOU,WAAWC,MAAX,CAAkBC,KAAlB,CAAwBC,aAAxB,CAAsCd,OAAtC,CAAP;AACA,KAAIC,QAAQ,IAAZ,EAAkB;AACjBU,aAAWI,aAAX,CAAyBC,UAAzB,CAAoCT,OAAOG,MAAP,EAApC,EAAqD,SAArD,EAAgE;AAC/DO,QAAKC,OAAOC,EAAP,EAD0D;AAE/DC,QAAKrB,KAAKqB,GAFqD;AAG/DC,OAAI,IAAIC,IAAJ,EAH2D;AAI/DC,QAAKC,QAAQC,EAAR,CAAW,uBAAX,EAAoC;AACxCC,iBAAa,SAD2B;AAExCC,aAAS,CAAC3B,OAAD;AAF+B,IAApC,EAGFE,KAAK0B,QAHH;AAJ0D,GAAhE;AASA;AACA;AACDrB,QAAOsB,IAAP,CAAY,eAAZ,EAA6B7B,OAA7B,EAAsC,EAAtC;AACA;;AAEDW,WAAWmB,aAAX,CAAyBC,GAAzB,CAA6B,QAA7B,EAAuCnC,MAAvC,6B","file":"/packages/rocketchat_slashcommands-create.js","sourcesContent":["function Create(command, params, item) {\n\tvar channel, room, user;\n\tif (command !== 'create' || !Match.test(params, String)) {\n\t\treturn;\n\t}\n\tchannel = params.trim();\n\tif (channel === '') {\n\t\treturn;\n\t}\n\n\tuser = Meteor.users.findOne(Meteor.userId());\n\troom = RocketChat.models.Rooms.findOneByName(channel);\n\tif (room != null) {\n\t\tRocketChat.Notifications.notifyUser(Meteor.userId(), 'message', {\n\t\t\t_id: Random.id(),\n\t\t\trid: item.rid,\n\t\t\tts: new Date(),\n\t\t\tmsg: TAPi18n.__('Channel_already_exist', {\n\t\t\t\tpostProcess: 'sprintf',\n\t\t\t\tsprintf: [channel]\n\t\t\t}, user.language)\n\t\t});\n\t\treturn;\n\t}\n\tMeteor.call('createChannel', channel, []);\n}\n\nRocketChat.slashCommands.add('create', Create);\n"]}